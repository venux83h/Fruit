--// SERVICES
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

--// CONFIG
local ITEMS_FOLDER_NAME = "Items"
local COOLDOWN = 0.3

local itemsFolder = ReplicatedStorage:WaitForChild(ITEMS_FOLDER_NAME, 10)
local backpack = player:WaitForChild("Backpack")
local accessoryInventory = player:WaitForChild("AccessoryInventoryList")
local swordInventory = player:WaitForChild("InventoryList")
local LegendaryFruits = ReplicatedStorage:WaitForChild("FRUITNOTIFSSPAWNS"):WaitForChild("Legendary")
local MythicalFruits = ReplicatedStorage:WaitForChild("FRUITNOTIFSSPAWNS"):WaitForChild("Mythical")

--// COLORS
local COLORS = {White=Color3.fromRGB(255,255,255), Black=Color3.fromRGB(28,28,30), Gray=Color3.fromRGB(40,40,40)}

--// GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "JAIX_HUB_GUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0,420,0,480)
frame.Position = UDim2.new(0.5,-210,0.5,-240)
frame.BackgroundColor3 = COLORS.Black
frame.Active = true
frame.Parent = screenGui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,16)
Instance.new("UIStroke", frame).Color = COLORS.White

local gradient = Instance.new("UIGradient", frame)
gradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0,COLORS.Black),ColorSequenceKeypoint.new(1,COLORS.Gray)}
gradient.Rotation = 90

--// TITLE
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,-20,0,40)
title.Position = UDim2.new(0,10,0,8)
title.BackgroundTransparency = 1
title.Text = "JAIX HUB"
title.Font = Enum.Font.GothamBlack
title.TextSize = 22
title.TextColor3 = COLORS.White
title.TextXAlignment = Enum.TextXAlignment.Left

--// FRUIT SELECTION
local inputBox = Instance.new("TextBox", frame)
inputBox.Size = UDim2.new(1,-20,0,36)
inputBox.Position = UDim2.new(0,10,0,60)
inputBox.PlaceholderText = "Select or type fruit..."
inputBox.Text = ""
inputBox.ClearTextOnFocus = false
inputBox.TextColor3 = COLORS.White
inputBox.BackgroundColor3 = COLORS.Gray
Instance.new("UICorner", inputBox).CornerRadius = UDim.new(0,10)

local spawnBtn = Instance.new("TextButton", frame)
spawnBtn.Size = UDim2.new(0.5,-12,0,38)
spawnBtn.Position = UDim2.new(0,10,0,106)
spawnBtn.Text = "ADD FRUIT"
spawnBtn.TextColor3 = COLORS.White
spawnBtn.BackgroundColor3 = COLORS.Gray
Instance.new("UICorner", spawnBtn).CornerRadius = UDim.new(0,10)

local autoEquipToggle = Instance.new("TextButton", frame)
autoEquipToggle.Size = UDim2.new(0.5,-12,0,38)
autoEquipToggle.Position = UDim2.new(0.5,2,0,106)
autoEquipToggle.Text = "AUTO EQUIP: OFF"
autoEquipToggle.TextColor3 = COLORS.White
autoEquipToggle.BackgroundColor3 = COLORS.Gray
Instance.new("UICorner", autoEquipToggle).CornerRadius = UDim.new(0,10)

local listLabel = Instance.new("TextLabel", frame)
listLabel.Size = UDim2.new(1,-20,0,20)
listLabel.Position = UDim2.new(0,10,0,154)
listLabel.BackgroundTransparency = 1
listLabel.Text = "FRUIT SELECTION"
listLabel.TextColor3 = Color3.fromRGB(200,200,200)
listLabel.TextXAlignment = Enum.TextXAlignment.Left

local scroll = Instance.new("ScrollingFrame", frame)
scroll.Size = UDim2.new(1,-20,0,200)
scroll.Position = UDim2.new(0,10,0,180)
scroll.BackgroundColor3 = COLORS.Black
scroll.BorderSizePixel = 0

local uiListLayout = Instance.new("UIListLayout", scroll)
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
uiListLayout.Padding = UDim.new(0,4)

--// UTILS
local lastAction = 0
local autoEquip = false

local function notify(text)
    StarterGui:SetCore("SendNotification",{Title="JAIX HUB",Text=text,Duration=2})
end

local function addItemByName(name,doAutoEquip)
    if tick()-lastAction<COOLDOWN then notify("Wait a bit") return end
    lastAction = tick()
    local model = itemsFolder:FindFirstChild(name)
    if not model then notify("Fruit not found") return end
    local tool = model:FindFirstChildOfClass("Tool") or model
    if not tool then notify("No Tool inside "..ITEMS_FOLDER_NAME) return end
    tool.Parent = backpack -- no clone, server handles actual give
    if doAutoEquip and player.Character then
        local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            task.delay(0.05,function() pcall(function() humanoid:EquipTool(tool) end) end)
        end
    end
    notify("Added "..tool.Name)
end

local function populateList()
    scroll:ClearAllChildren()
    local fruitNames = {"Cold","Bomb","Barrier","Smoke","Chainsawman","Snowman","Spiderman","Portal","Ope","Admin-Admin","Dough","Dragon","Flame","Lightning","Gum","Light","Magma","Pain","Quake","Snow","Phoenix","Venom","Sound","Shadow","Sand","Spring","Gravity","Revive","Mammoth","T-Rex","Love","Hunter","Kitsune","Warp","Nightmare","Yeti","Gas","Arise","Beru","Kaisel","Guard","Wood","Tiger"}
    for i,v in ipairs(fruitNames) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1,0,0,22)
        btn.BackgroundColor3 = COLORS.Gray
        btn.TextColor3 = COLORS.White
        btn.Text = v
        btn.Parent = scroll
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
        btn.MouseButton1Click:Connect(function() inputBox.Text = v end)
    end
    task.wait()
    scroll.CanvasSize = UDim2.new(0,0,0,uiListLayout.AbsoluteContentSize.Y+6)
end

--// GET ALL BUTTONS
local function createGetAllButton(text, yPos, callback)
    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-20,0,36)
    btn.Position = UDim2.new(0,10,0,yPos)
    btn.BackgroundColor3 = COLORS.Gray
    btn.TextColor3 = COLORS.White
    btn.Text = text
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)
    btn.MouseButton1Click:Connect(callback)
end

createGetAllButton("Get All Swords", 390, function()
    for _, item in ipairs(swordInventory:GetChildren()) do
        if item:IsA("BoolValue") then item.Value = true end
    end
end)

createGetAllButton("Get All Accessories", 430, function()
    for _, item in ipairs(accessoryInventory:GetChildren()) do
        if item:IsA("BoolValue") then item.Value = true end
    end
end)

createGetAllButton("Get All Legendary Fruits", 470, function()
    for _, fruit in ipairs(LegendaryFruits:GetChildren()) do
        local tool = fruit:FindFirstChildOfClass("Tool") or fruit
        if tool then tool.Parent = backpack end
    end
end)

createGetAllButton("Get All Mythical Fruits", 510, function()
    for _, fruit in ipairs(MythicalFruits:GetChildren()) do
        local tool = fruit:FindFirstChildOfClass("Tool") or fruit
        if tool then tool.Parent = backpack end
    end
end)

--// DRAG FUNCTION
local function makeDraggable(frame)
    local dragging,dragStart,startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 or input.UserInputType==Enum.UserInputType.Touch then
            dragging=true
            dragStart=input.Position
            startPos=frame.Position
        end
    end)
    frame.InputEnded:Connect(function(input)
        if input.UserInputType==Enum.UserInputType.MouseButton1 or input.UserInputType==Enum.UserInputType.Touch then dragging=false end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType==Enum.UserInputType.MouseMovement or input.UserInputType==Enum.UserInputType.Touch) then
            local delta=input.Position-dragStart
            frame.Position=UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y)
        end
    end)
end

makeDraggable(frame)

--// EVENTS
spawnBtn.MouseButton1Click:Connect(function()
    addItemByName(inputBox.Text,autoEquip)
end)

autoEquipToggle.MouseButton1Click:Connect(function()
    autoEquip = not autoEquip
    autoEquipToggle.Text = "AUTO EQUIP: "..(autoEquip and "ON" or "OFF")
end)

UserInputService.InputBegan:Connect(function(input,gpe)
    if gpe then return end
    if input.KeyCode==Enum.KeyCode.R then populateList()
    elseif input.KeyCode==Enum.KeyCode.Escape then
        frame.Visible = not frame.Visible
    end
end)

--// INITIAL POPULATE
populateList()
